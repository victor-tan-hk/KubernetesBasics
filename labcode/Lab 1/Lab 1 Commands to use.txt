

+++++ 5	Intro to pods

kubectl run nginx --image=nginx

kubectl get pods

kubectl get pods -o wide

kubectl describe pod nginx

kubectl delete pod nginx

kubectl get pods


++++ pod.yaml


apiVersion: v1
kind: Pod
metadata: 
  name: nginx
  labels: 
    app: nginx
    tier: frontend
spec:
  containers:
  - name: nginx
    image: nginx

kubectl apply -f pod.yaml

kubectl get pods

kubectl get pods -o wide

kubectl describe pod nginx

kubectl delete pod nginx


+++++ 6	Intro to ReplicaSets


+++ replicaset.yaml


apiVersion: apps/v1
kind: ReplicaSet
metadata:
  name: myapp-replicaset
  labels:
    app: myapp
spec:
  selector:
    matchLabels:
      env: production
  replicas: 3
  template: 
    metadata:
      name: nginx-2
      labels:
        env: production
    spec:
      containers:
        - name: nginx
          image: nginx


++++ kubectl commands

kubectl apply -f replicaset.yaml

kubectl get replicaset

kubectl get pods

kubectl delete pod myapp-ReplicaSet-xxxx

kubectl get pods

kubectl describe replicaset myapp-ReplicaSet

++++ nginx.yaml

apiVersion: v1
kind: Pod
metadata:
  name: nginx-2
  labels:
    env: production
spec:
  containers:
    - name: nginx
      image: nginx


++++ Kubectl commands


kubectl get pods

kubectl apply -f nginx.yaml

kubectl get pods

kubectl describe replicaset myapp-ReplicaSet

kubectl edit replicaset myapp-ReplicaSet

kubectl scale replicaset myapp-ReplicaSet --replicas=2

kubectl get pods

kubectl delete replicaset <ReplicaSet-name>

or

kubectl delete -f <file-name>.yaml


++++ 7	Intro to Deployments and Services


++++ deployment.yaml


apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp-deployment
  labels: 
    tier: frontend
    app: nginx
spec:
  selector:
    matchLabels:
      app: myapp
  replicas: 3
  template: 
    metadata:
      name: nginx-2
      labels:
        app: myapp
    spec:
      containers:
        - name: nginx
          image: nginx


++++++ kubectl commands

kubectl apply -f deployment.yaml

kubectl get deployments

kubectl get pods

kubectl get replicaset

kubectl describe deployment myapp-development

kubectl get all


+++++ 7.1	Performing updates and rollbacks with deployments

kubectl delete deployment myapp-deployment

++++ Update deployment.yaml


apiVersion: apps/v1
kind: Deployment
metadata:
  name: myapp-deployment
  labels: 
    tier: frontend
    app: nginx
spec:
  selector:
    matchLabels:
      app: myapp
  replicas: 6
  template: 
    metadata:
      name: nginx-2
      labels:
        app: myapp
    spec:
      containers:
        - name: nginx
          image: nginx

++++++ kubectl commands

kubectl apply -f deployment.yaml


kubectl rollout status deployment.apps/myapp-deployment

kubectl delete deployment myapp-deployment

kubectl apply -f deployment.yaml

kubectl rollout status deployment.apps/myapp-deployment

kubectl rollout history deployment.apps/myapp-deployment

kubectl delete deployment myapp-deployment

kubectl create -f deployment.yaml --record

kubectl rollout history deployment.apps/myapp-deployment

kubectl describe deployment myapp-deployment

kubectl edit deployment myapp-deployment --record

kubectl rollout status deployment.apps/myapp-deployment

kubectl describe deployment myapp-deployment

kubectl set image deployment myapp-deployment nginx=nginx:1.22.1-perl --record

kubectl rollout status deployment.apps/myapp-deployment

kubectl rollout history deployment.apps/myapp-deployment

kubectl get pods

kubectl rollout undo deployment.apps/myapp-deployment

kubectl rollout history deployment.apps/myapp-deployment

kubectl describe deployment myapp-deployment

kubectl rollout history deployment.apps/myapp-deployment

kubectl edit deployment myapp-deployment --record

kubectl rollout status deployment.apps/myapp-deployment

kubectl get deployment myapp-deployment

kubectl get pods

kubectl rollout undo deployment.apps/myapp-deployment

kubectl describe deployment myapp-deployment

kubectl get pods

kubectl delete deployment myapp-deployment

+++++ 7.2	Creating deployments from a custom image

docker build -t kub-first-app .

kubectl create deployment first-app --image=kub-first-app

kubectl get deployments

kubectl get pods

kubectl describe pod first-app

kubectl delete deployment first-app

docker tag kub-first-app dockerhubaccount/kub-first-app

docker push dockerhubaccount/kub-first-app

kubectl create deployment first-app --image=dockerhubaccount/kub-first-app


kubectl get deployments

kubectl get pods


+++++ 7.3	Using services to expose deployments for access 

